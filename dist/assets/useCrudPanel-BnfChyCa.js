import{j as e,F as w,E as de,k as y,G as ue,c as fe,l as me,H as q,J as xe,r as u,d as he,b as je,K as ge,w as pe,s as m}from"./index-DSXsjQfW.js";import{r as be,s as ve,i as V,v as we,f as H}from"./validations-R_Xd7w2Q.js";function Ee({title:a,isOpen:s,onClickNew:c,icon:n=!1,searchValue:l,searchOnChange:d,rightButtonComponent:i=!1}){return e.jsxs("section",{className:"relative z-10 grid gap-4 grid-cols-1 md:grid-cols-4 lg:grid-cols-3 bg-[--c3-bg] rounded-sm border-solid border-t-[3px] border-[var(--c3-txt3)] shadow-[0_2px_5px_0_rgba(0,0,0,0.3)]",style:{margin:"0",padding:s?"10px":"0",height:s?"auto":"0",opacity:s?"1":"0",overflow:s?"visible":"hidden"},children:[e.jsx("div",{className:"col-span-1 xl:col-span-1",children:e.jsxs("h3",{className:"flex gap-1 w-full h-full items-center justify-center md:justify-start font-content2 font-bold text-md text-[var(--c3-txt3)]",children:[n&&e.jsx(w,{icon:n,className:"text-sm mb-1"})," ",a]})}),e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-1 flex w-full h-8 items-center rounded-md overflow-hidden border border-solid border-[--c6-bg]",children:[e.jsxs("span",{className:"flex justify-center items-center h-full px-2 bg-[--c6-bg] text-[--c6-txt]",children:["Buscar:"," "]}),e.jsxs("div",{className:"flex items-center w-full h-full px-2 bg-[--c3-bg]",children:[e.jsx(w,{icon:de,className:"text-[--c3-txt4]"}),e.jsx("input",{type:"search",placeholder:"Busca por cualquier campo..",value:l,onChange:d,className:"w-full pl-1 bg-[--c3-bg]"})]})]}),!i&&e.jsx("div",{className:"w-full flex justify-end",children:e.jsx("div",{className:"w-full lg:w-24",children:e.jsx(y,{text:"Agregar",icon:ue,type:"new",onClick:c,style:{width:"100%"}})})}),i&&e.jsx("div",{className:"w-full flex justify-end",children:e.jsx("div",{className:"w-full lg:w-24",children:i})})]})}function k({cols:a=1,actionsNum:s}){return e.jsx("tr",{className:"relative bg-[var(--color6-bg)] rounded skeleton",children:e.jsxs(e.Fragment,{children:[Array(a).fill().map((c,n)=>e.jsx("td",{className:"h-full px-2",children:e.jsx(R,{})},n)),e.jsxs("td",{className:"td-action",children:[e.jsx("div",{className:"buttons-flex",children:new Array(s).fill().map((c,n)=>e.jsx(R,{className:"rounded-md"},n))}),e.jsx("div",{className:"brigth-animation absolute inset-0"})]})]})})}function R({className:a}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex-1 flex h-full rounded-full bg-[var(--color6-txt)] text-[var(--color6-txt)] min-w-20 "+a,children:"."})})}function Fe({titles:a,isOpen:s,dataList:c,onRowPrint:n,actionsNum:l=2,actionText:d="Acción",classWrapper:i=""}){return e.jsx("section",{className:fe("relative z-10 panel-crudtable-component",i,{open:s}),children:e.jsx("div",{className:"content_table ideatable scroll-style",children:e.jsxs("table",{border:"1",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[a.map(x=>e.jsx("th",{children:x},x)),e.jsx("th",{children:d})]})}),e.jsxs("tbody",{children:[c&&c.map(x=>n(x)),!c&&e.jsxs(e.Fragment,{children:[e.jsx(k,{cols:a.length,actionsNum:l}),e.jsx(k,{cols:a.length,actionsNum:l}),e.jsx(k,{cols:a.length,actionsNum:l}),e.jsx(k,{cols:a.length,actionsNum:l})]})]})]})})})}function Te({value:a,classNameText:s=""}){return e.jsx("td",{children:e.jsx("span",{className:"td-span "+s,children:a})})}function ke({src:a,alt:s}){return e.jsx("td",{children:e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:a,className:"td-photo",alt:s})})})}function $e({code:a,className:s="",fill:c="#000",...n}){return e.jsx("td",{children:e.jsx("div",{className:"flex justify-center"+s,...n,children:e.jsx("div",{className:"w-5 aspect-square",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a},style:{fill:c},className:"w-full h-ful"})})})})}function _e({children:a}){return e.jsx("td",{className:"td-action",children:e.jsx("div",{className:"buttons-flex",children:a})})}function Ie({children:a,title:s,onClickCancel:c,isOpen:n,onSubmit:l,formRef:d,showSaveButton:i=!0,textCancel:x="Cancelar"}){return e.jsx("section",{className:"relative z-10 panel-crudform-component "+(n?"open":""),children:e.jsxs("form",{className:"ideaform",onSubmit:l,ref:d,noValidate:!0,children:[e.jsx("div",{className:"head",children:e.jsx("h3",{children:s})}),e.jsx("div",{className:"body",children:a}),e.jsxs("div",{className:"foot",children:[e.jsx("div",{className:"msg",id:"msg"}),e.jsxs("div",{className:"buttons",children:[i&&e.jsx(y,{text:"Guardar",icon:me,type:"edit",_type:"submit"}),e.jsx(y,{text:x,icon:q,type:"cancel",onClick:c})]})]})]})})}function Pe({label:a,name:s,placeholder:c,type:n="text",required:l=!1,classNameWrapper:d="",...i}){return e.jsxs("div",{className:"campo "+d,children:[e.jsxs("span",{children:[a," ",l?e.jsx("b",{children:"*"}):"",":"]}),e.jsx(ye,{type:n,name:s,placeholder:c,...i,required:l})]})}function ye({radioOptions:a=[],...s}){const n=[{type:"file",Component:({accept:l="image/jpg"})=>e.jsxs("div",{className:"inputfile",children:[e.jsx("input",{className:"placeholder_off",accept:l,...s}),e.jsx(w,{icon:xe})]})},{type:"select",Component:()=>e.jsx("select",{...s,children:s.children})},{type:"textarea",Component:()=>e.jsx("textarea",{...s,className:"border-solid border border-gray-300 rounded-xm p-2 bg-white "+s.className})},{type:"password",Component:()=>{const[l,d]=u.useState(!0),i=()=>{d(!l)};return e.jsxs("div",{className:"inputpass ",children:[e.jsx("input",{...s,type:l?"password":"text"}),e.jsx("button",{type:"button",className:"ideabutton showpass flex justify-center items-center",onClick:i,children:e.jsx(w,{icon:l?he:je})})]})}},{type:"radio",Component:()=>e.jsx("div",{className:"flex w-full rounded-sm overflow-hidden bg-white",style:{border:"solid 1px rgba(0, 0, 0, 0.2)"},children:a.map(({value:l,label:d,checked:i=!1})=>e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{...s,type:"radio",id:s.name+"-"+l,name:s.name,value:l,className:"hidden [&:checked~div]:w-full [&:checked~label]:opacity-100 [&:checked~label]:font-bold [&:checked~label]:text-[var(--info)] ",defaultChecked:i}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 m-auto w-0 h-0.5 bg-[var(--info)] transition-all duration-200"}),e.jsx("label",{htmlFor:s.name+"-"+l,className:"cursor-pointer flex w-full h-full justify-center text-center p-1 transition-all duration-200 opacity-80 hover:opacity-100 "+(s!=null&&s.disabled?"cursor-not-allowed opacity-40":""),children:d})]},l))})}].find(l=>l.type==s.type);return n?e.jsx(n.Component,{}):e.jsx("input",{...s})}function De({isOpen:a,text:s,onClickDelete:c,onClickCancel:n}){return e.jsx("section",{className:"panel-crudconfirm-component "+(a?"open":""),onClick:l=>{l.target===l.currentTarget&&n()},children:e.jsxs("div",{className:"ideaconfirm",children:[e.jsxs("div",{className:"head",children:[e.jsx("p",{className:"msg",children:s}),e.jsx("button",{id:"modalClose",onClick:n,children:e.jsx(w,{icon:ge})})]}),e.jsxs("div",{className:"foot",children:[e.jsx(y,{text:"Cancelar",icon:q,type:"cancel",onClick:n,className:"bg-gray-500"}),e.jsx(y,{text:"Eliminar",icon:pe,type:"delete",onClick:c})]})]})})}function ze({entityName:a,pluralEntityName:s,excludeFieldsValidationEdit:c=[],extraValidations:n=()=>!0,isStorageMultipartFormData:l=!1,isUpdateMultipartFormData:d=!1,crudGet:i=null,crudStorage:x=null,crudUpdate:L=null,crudDestroy:B=null,gender:j=!0,searchFields:J=[]}){const[K,$]=u.useState(!0),[W,_]=u.useState(!0),[X,I]=u.useState(!1),[G,P]=u.useState(!1),[Q,N]=u.useState(!1),M=()=>{$(!1),_(!1),I(!0),P(!1),N(!1)},C=()=>{$(!0),_(!0),I(!1),P(!1),N(!1)},Y=()=>{$(!0),_(!0),I(!1),P(!0),N(!1)},g=t=>{N(t)},[p,b]=u.useState(null),[Z,U]=u.useState(null),[S,O]=u.useState(""),[h,D]=u.useState(null),z=u.useRef(null);u.useEffect(()=>{if(!i)return b([]);i().then(t=>b(t))},[i]),u.useEffect(()=>{if(!S)return U(null);const t=S.toLowerCase(),o=p.filter(r=>{var E,v,F;let f=!1;for(const T of J){const A=r[T]?r[T].toString().toLowerCase():"";if(T.includes(".")){const[ie,oe]=T.split(".");(v=(E=r[ie][oe])==null?void 0:E.toLowerCase())!=null&&v.includes(t)&&(f=!0)}else(F=A==null?void 0:A.toLowerCase())!=null&&F.includes(t)&&(f=!0)}return f});U(o)},[S]);function ee(){M(),D(null),be(z.current)}function se(t){M(),D(t),ve(t,z.current,100)}function ae(t){Y(),D(t)}function te(){C(),m({title:"Cancelado",message:"Se cancelo la operación",type:"warning"})}function le(t){t.preventDefault();const o=t.target;let r=V(o);if(h&&(r=V(o,c)),!r.isValidate)return m({title:"Error de validación",message:"Complete los campos requeridos (*)",type:"warning"});if(!n(o,Ne,we))return;const f=new FormData(o);return g(!0),h?re(f):ne(f)}function ne(t){let o=t;l||(o=H(t)),x({data:o}).then(r=>{if(g(!1),r!=null&&r.success){const f=r.data;b([...p,f]),m({title:"Exito",message:`${a} cread${j?"o":"a"} correctamente`,type:"success"}),C()}else m({title:"Error desde el servidor",message:r.message||`"Error al crear ${j?"el":"la"} ${a}`,type:"danger"})})}function re(t){let o=t;d||(o=H(t)),L({id:h.id,data:o}).then(r=>{if(g(!1),r!=null&&r.success){const f=r.data,E=p.findIndex(F=>F.id===f.id),v=[...p];v[E]=f,b(v),m({title:"Exito",message:`${a} actualizad${j?"o":"a"} correctamente`,type:"success"}),C()}else m({title:"Error desde el servidor",message:r.message||`Error al actualizar ${j?"el":"la"} ${a}`,type:"danger"})})}function ce(){if(!(h!=null&&h.id))return m({title:"Error de validación",message:`Seleccione ${j?"un":"una"} ${a} a eliminar`,type:"danger"});g(!0),B({id:h.id}).then(t=>{if(g(!1),t!=null&&t.success){const o=p.filter(r=>r.id!==h.id);b(o),m({title:"Exito",message:`${a} eliminad${j?"o":"a"} correctamente`,type:"success"})}else m({title:"Error desde el servidor",message:(t==null?void 0:t.message)||`Error al eliminar ${j?"el":"la"} ${a}`,type:"danger"});C()})}return{entityName:a,pluralEntityName:s,head:K,table:W,form:X,confirm:G,progress:Q,datalist:Z||p,$form:z,searchValue:S,handleModeNew:ee,handleModeEdit:se,handleModeDelete:ae,hanleCancel:te,handleSubmit:le,handleDelete:ce,searchOnChange:({target:t})=>O(t.value),showProgress:g,updateDatalist:t=>b(t)}}function Ne(a){m({title:"Error de validación",message:a,type:"warning"})}export{Ee as C,Fe as a,ke as b,Te as c,_e as d,Ie as e,Pe as f,De as g,$e as h,ze as u};
