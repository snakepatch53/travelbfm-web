import{r as o,I as y,M as C,j as e,P as S,F as h,E as I,N as B,O as P,Q as E,c as p}from"./index-DSXsjQfW.js";import{C as z}from"./CrudBackground-CIVg33FB.js";function O(){const{categories:l,products:a}=o.useContext(y),{business_id:s}=C(),[t,n]=o.useState(null),[r,i]=o.useState(null),[u,g]=o.useState(null),[f,b]=o.useState(0);o.useEffect(()=>{if(!s){n(a),g(l);return}n(a==null?void 0:a.filter(c=>{var x;return((x=c.category)==null?void 0:x.business_id)==s})),g(l==null?void 0:l.filter(c=>c.business_id==s))},[s,a,l]),o.useEffect(()=>{f==0?i(t):i(t.filter(c=>c.category_id==f))},[f,t]);const w=c=>{const x=c.target.value;x==""?i(t):i(t.filter(k=>k.name.toLowerCase().includes(x.toLowerCase())))},[v,N]=o.useState(!1);return{products:t,productFilter:r,categories:u,categorySelected:f,setCategorySelected:b,handleSearch:w,categoriesIsOpen:v,togleCategories:()=>{document.getElementById("main-content").scrollTo(0,0),N(c=>!c)}}}function T(){const{productFilter:l,categories:a,categorySelected:s,setCategorySelected:t,handleSearch:n,categoriesIsOpen:r,togleCategories:i}=O();return e.jsxs(S,{className:"relative flex flex-col w-full",children:[e.jsx(z,{src:"/image/food1.jpg",withBlur:!1}),e.jsxs("div",{className:"sticky top-0 z-20 flex w-full bg-[--c6-bg] text-[--c6-txt] mb-5 lg:mb-10 rounded-md overflow-hidden shadow-xl py-1",style:{boxShadow:"0px 1px 10px 1px rgba(0,0,0,0.8)"},children:[e.jsx("span",{className:"flex h-full items-center px-3 font-link text-lg",children:"Buscar:"}),e.jsx("input",{type:"text",className:"w-full p-2 rounded-md text-black",placeholder:"Escribe el nombre del producto",onChange:n}),e.jsxs("div",{className:"flex h-full aspect-square mx-1",children:[e.jsx("div",{className:"hidden lg:flex h-full w-full justify-center items-center",children:e.jsx(h,{icon:I,className:"text-md"})}),e.jsx("button",{className:"flex lg:hidden h-full w-full justify-center items-center rounded-md transition-all duration-200 hover:bg-black/10",onClick:i,children:e.jsx(h,{icon:B,className:"text-md"})})]})]}),e.jsxs("div",{className:"relative z-10 flex flex-1  gap-5 lg:gap-10",children:[e.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4  gap-5 lg:gap-10 ",children:[l==null?void 0:l.map(u=>e.jsx(_,{...u},u.id)),l==null&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{})]}),(l==null?void 0:l.length)==0&&e.jsx("div",{className:"col-span-4 grid place-content-center rounded-md",children:e.jsx("h2",{className:"font-content uppercase text-3xl text-center select-text text-white",style:{textShadow:"1px 0 1px #000, -1px 0 1px #000, 0 1px 1px #000, 0 -1px 1px #000"},children:"No hay productos"})})]}),e.jsx(A,{isOpen:r,categorySelected:s,setCategorySelected:t,categories:a})]})]})}function _({...l}){var t,n;const{addProduct:a}=o.useContext(P),s=r=>()=>a(r);return e.jsxs("div",{className:"flex flex-col items-center w-full bg-white rounded-md shadow-xl overflow-hidden mb-auto",children:[e.jsx("div",{className:"group/photo w-full aspect-video overflow-hidden rounded-sm shadow-lg",children:e.jsx("img",{src:l.photo_url,className:"flex w-full h-full object-cover object-center group-hover/photo:scale-110 transition-all duration-200"})}),e.jsxs("div",{className:"flex-1 flex flex-col w-full pb-3 px-2",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("h3",{className:"block text-nowrap text-ellipsis overflow-hidden font-link text-lg text-center mt-2 select-text",children:l.name}),e.jsx("p",{className:"max-h-12 min-h-12 h-full font-content text-xs text-left opacity-80 overflow-hidden text-pretty select-text",children:l.description})]}),e.jsxs("div",{className:"flex flex-row items-center w-full gap-1 justify-between px-2",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-1 text-lg text-nowrap text-ellipsis overflow-hidden",children:[e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 min-w-4 fill-blue-500 pt-[1.5px]",children:e.jsx("path",{d:"M19.965 8.521C19.988 8.347 20 8.173 20 8c0-2.379-2.143-4.288-4.521-3.965C14.786 2.802 13.466 2 12 2s-2.786.802-3.479 2.035C6.138 3.712 4 5.621 4 8c0 .173.012.347.035.521C2.802 9.215 2 10.535 2 12s.802 2.785 2.035 3.479A3.976 3.976 0 0 0 4 16c0 2.379 2.138 4.283 4.521 3.965C9.214 21.198 10.534 22 12 22s2.786-.802 3.479-2.035C17.857 20.283 20 18.379 20 16c0-.173-.012-.347-.035-.521C21.198 14.785 22 13.465 22 12s-.802-2.785-2.035-3.479zm-9.01 7.895-3.667-3.714 1.424-1.404 2.257 2.286 4.327-4.294 1.408 1.42-5.749 5.706z"})}),e.jsx("span",{className:"block text-nowrap text-ellipsis overflow-hidden font-bold font-link first-letter:uppercase lowercase",children:(n=(t=l==null?void 0:l.category)==null?void 0:t.business)==null?void 0:n.name})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("h3",{className:"font-bold font-link text-lg my-1 select-text line-through text-red-500 ml-auto",children:["$",l.price+l.price*.2]}),e.jsxs("h3",{className:"font-link font-bold text-lg my-1 select-text text-green-600",children:["$",l.price]})]})]}),e.jsxs("button",{className:"flex gap-1 justify-center items-center w-full py-2 px-3 mt-auto opacity-85 hover:opacity-100 rounded-md transition-all duration-300 bg-blue-500 text-white",onClick:s(l),children:[e.jsx("span",{children:"Agregar al Carrito"}),e.jsx(h,{icon:E,className:"text-base"})]})]})]})}function m(){return e.jsxs("div",{className:"flex flex-col items-center w-full bg-white rounded-md shadow-xl overflow-hidden mb-auto animate-pulse",children:[e.jsx("div",{className:" w-full p-2",children:e.jsx("div",{className:"w-full aspect-video rounded-sm bg-black/15"})}),e.jsxs("div",{className:"flex-1 flex flex-col w-full pb-3 px-2",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("div",{className:"block mt-2 h-6 w-2/3 bg-black/15 rounded-full mx-auto"}),e.jsx("div",{className:"block mt-2 h-5 w-full bg-black/15 rounded-full mx-auto"})]}),e.jsxs("div",{className:"flex flex-row items-center w-full gap-5 justify-between",children:[e.jsx("div",{className:"block my-1 h-4 w-full bg-black/15 rounded-full mx-auto"}),e.jsx("div",{className:"block my-1 h-4 w-full bg-black/15 rounded-full mx-auto"})]}),e.jsx("div",{className:"block w-full h-10 py-2 px-3 mt-2 rounded-md bg-black/20"})]})]})}function A({isOpen:l,categorySelected:a,setCategorySelected:s,categories:t=[]}){return e.jsx("div",{className:p("scroll-style absolute top-0 z-10 max-h-[calc(100vh-190px)] w-full overflow-y-auto bg-white rounded-md pr-1 shadow-xl mb-auto","lg:sticky lg:top-20 lg:flex-1 lg:max-w-48",{"max-h-0 opacity-0 lg:max-h-[calc(100vh-190px)] lg:opacity-100":!l}),children:e.jsxs("div",{className:"flex flex-col w-full gap-1",children:[e.jsx("div",{className:"sticky top-0 z-10 flex justify-center items-center h-10 bg-white",children:e.jsx("h2",{className:"font-link font-bold text-center text-xl tracking-widest",children:"Categorias"})}),e.jsx(j,{name:"Todos",icon:"",id:"0",selected:a,onClick:()=>s(0)}),t==null?void 0:t.map(n=>e.jsx(j,{...n,selected:a,onClick:()=>s(n.id)},n.id)),!t&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{})]})]})})}function j({selected:l,onClick:a,...s}){return e.jsxs("button",{onClick:a,className:p("group/button relative flex items-center justify-between py-2 px-4 hover:bg-gray-300 font-link",{"bg-gray-300":l==s.id}),children:[e.jsx("div",{className:p("absolute left-0 top-1/5 -translate-y-1/5 w-[3px] h-0 group-hover/button:h-full bg-[--c6-bg] transition-all duration-300",{"h-full":l==s.id})}),e.jsx("span",{className:"block text-nowrap text-ellipsis overflow-hidden font-link text-left text-[--c4-bg]",children:s.name}),e.jsx("div",{dangerouslySetInnerHTML:{__html:s.icon},className:"w-4 min-w-4 fill-[--c4-bg] ml-1"})]})}function d(){return e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-black/20 animate-pulse",children:[e.jsx("span",{className:"block h-5 w-full rounded-full bg-black/10"}),e.jsx("div",{className:"h-5 aspect-square rounded-full ml-1 bg-black/10"})]})}export{T as default};
