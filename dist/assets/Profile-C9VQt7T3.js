import{r as p,S as h,j as e,P as w,C as b,l as v,m as j,n as y,s as x,u as N,F as C,o as E}from"./index-Cu38GDJQ.js";import{i as q,a as S}from"./validations-BCKcn_3C.js";function F(){const{session:s,updateSession:r}=p.useContext(h),[c,u]=p.useState(null),d=p.useRef(),m=n=>{n.preventDefault();const a=n.target;d.current.onsubmit=i=>{if(i.preventDefault(),!q(a,["photo","password","confirm_password"]).isValidate)return x({title:"Error de validación",message:"Complete los campos requeridos (*)",type:"warning"});if(!S(a.email.value))return x({title:"Error de validación",message:"El email debe ser válido",type:"warning"});if(a.password.value!==a.confirm_password.value)return x({title:"Error de validación",message:"Las contraseñas no coinciden",type:"warning"});const o=new FormData(a);a.password.value.length==0&&(o.delete("password"),o.delete("confirm_password")),u(!0),N({data:o}).then(t=>{u(!1),t!=null&&t.success?(r(t.data),x({title:"Exito",message:"Sus datos han sido actualizados correctamente",type:"success"}),a.password.value="",a.confirm_password.value=""):x({title:"Error desde el servidor",message:t.message||"Error al actualizar sus datos",type:"danger"})})}};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:"flex w-full m-auto",children:[e.jsx(b,{src:"/image/drink1.jpg"}),e.jsx("div",{className:"scroll-style relative z-10 w-full max-w-[var(--max-width)] bg-white rounded-lg shadow-xl p-[--pdd]",children:e.jsx("form",{onSubmit:m,ref:d,className:"flex w-full",noValidate:!0,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 content-center w-full justify-center gap-10   ",children:[e.jsx(_,{src:s.photo_url,fileName:"photo",inputLabel:"Cambiar Foto",tagImgName:"photo_img"}),e.jsx(l,{label:"Nombre",name:"name",value:s.name,required:!0}),e.jsx(l,{label:"Apellido",name:"lastname",value:s.lastname,required:!0}),e.jsx(l,{label:"Celular",name:"phone",value:s.phone,required:!0}),e.jsx(l,{label:"Privilegio",name:"role",value:s.role,disabled:!0,required:!0}),e.jsx(l,{label:"Estado",name:"state",value:s.state,disabled:!0,required:!0}),e.jsx(l,{label:"Dirección",name:"address",value:s.address,required:!0}),e.jsx(l,{label:"Email",name:"email",value:s.email,required:!0}),e.jsx(l,{label:"Contraseña",name:"password",type:"password"}),e.jsx(l,{label:"Confirmar Contraseña",name:"confirm_password",type:"password"}),e.jsx("div",{className:"col-span-1 lg:col-span-2 xl:col-span-3 flex flex-col justify-center items-center p-5 bg-white rounded-lg ",children:e.jsx(v,{icon:j,text:"Guardar Cambios",type:"edit",_type:"submit",className:"w-full max-w-96 py-5 px-10 rounded-full bg-[--c6-bg] hover:scale-105",classNameText:"text-base font-content2",classNameIcon:"text-sm",classNameBeffore:"hidden"})})]})})})]}),e.jsx(y,{isOpen:c,text:"Procesando tu solicitud..."})]})}const _=({src:s,fileName:r,inputLabel:c="",inputIcon:u=E,fileAccept:d="image/jpg",tagImgName:m="",imgObjectCover:n=!0})=>{const a=p.useRef(null),i=o=>{const t=o.target.files[0];if(t){const f=new FileReader;f.onload=g=>{a.current.src=g.target.result},f.readAsDataURL(t)}};return e.jsx("div",{className:"flex content-center justify-center col-span-1 lg:col-span-2 xl:col-span-3 mb-5",children:e.jsxs("div",{className:"relative group/img w-full max-w-52 aspect-square rounded-full shadow-xl overflow-hidden",children:[e.jsx("img",{ref:a,src:s,alt:"Imagen de "+r,className:"w-full h-full object-center bg-gray-300 "+(n?"object-cover":"object-contain"),name:m}),e.jsx("input",{type:"file",name:r,id:r,accept:d,className:"hidden",onChange:i}),e.jsxs("label",{htmlFor:r,className:"absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] w-full h-full max-w-0 max-h-0 overflow-hidden group-hover/img:max-w-52 group-hover/img:max-h-52 opacity-0 group-hover/img:opacity-100 flex flex-col gap-2 justify-center items-center bg-black/50 cursor-pointer duration-100",children:[e.jsx(C,{icon:u,className:"text-3xl text-white"}),e.jsx("span",{className:"text-white",style:{textShadow:"1px 0 1px #000, -1px 0 1px #000, 0 1px 1px #000, 0 -1px 1px #000"},children:c})]})]})})},l=({label:s,type:r="text",value:c="",classNameWrapper:u="",classNameSubWrapper:d="",required:m=!1,disabled:n=!1,...a})=>{const i=p.useRef(null);p.useEffect(()=>{i.current.value=c,o({target:i.current})},[c]);const o=({target:t})=>{t.value.length>0?t.classList.add("[&+label]:bottom-full"):t.classList.remove("[&+label]:bottom-full")};return e.jsx("div",{className:"flex justify-center w-full "+u,children:e.jsxs("div",{className:"group relative w-full max-w-80 border-b border-solid border-gray-300 "+d,children:[e.jsx("input",{type:r,...a,className:"w-full [&:focus+label]:bottom-full "+(n?"opacity-70 hover:cursor-not-allowed":""),onInput:o,ref:i,required:m,disabled:n}),e.jsxs("label",{className:"absolute left-0 bottom-0 group-hover:bottom-full opacity-50",children:[s,m&&e.jsx("span",{className:"text-red-500",children:"*"}),":"," "]})]})})};export{F as default};
