import{M as k,r as c,j as e,P as C,F as h,E as S,N as P,O as B,Q as I,c as p}from"./index-BlHX8wUy.js";import{C as E}from"./CrudBackground-CjO61FQl.js";import{a as g}from"./categories-CA5ysTkW.js";import{a as j}from"./products-CwVT3N1j.js";function _(){const{business_id:l}=k(),[t,a]=c.useState(null),[n,o]=c.useState(null),[m,x]=c.useState(null),[i,w]=c.useState(0);c.useEffect(()=>{l?(j().then(s=>{a(s==null?void 0:s.filter(r=>{var u;return((u=r.category)==null?void 0:u.business_id)==l}))}),g().then(s=>{x(s==null?void 0:s.filter(r=>r.business_id==l))})):(j().then(s=>a(s)),g().then(s=>x(s)))},[l]),c.useEffect(()=>{i==0?o(t):o(t.filter(s=>s.category_id==i))},[i,t]);const v=s=>{const r=s.target.value;r==""?o(t):o(t.filter(u=>u.name.toLowerCase().includes(r.toLowerCase())))},[N,y]=c.useState(!1);return{products:t,productFilter:n,categories:m,categorySelected:i,setCategorySelected:w,handleSearch:v,categoriesIsOpen:N,togleCategories:()=>{document.getElementById("main-content").scrollTo(0,0),y(s=>!s)}}}function M(){const{productFilter:l,categories:t,categorySelected:a,setCategorySelected:n,handleSearch:o,categoriesIsOpen:m,togleCategories:x}=_();return e.jsxs(C,{className:"relative flex flex-col w-full",children:[e.jsx(E,{src:"/image/food1.jpg",withBlur:!1}),e.jsxs("div",{className:"sticky top-0 z-20 flex w-full bg-[--c6-bg] text-[--c6-txt] mb-5 lg:mb-10 rounded-md overflow-hidden shadow-xl py-1",style:{boxShadow:"0px 1px 10px 1px rgba(0,0,0,0.8)"},children:[e.jsx("span",{className:"flex h-full items-center px-3 font-link text-lg",children:"Buscar:"}),e.jsx("input",{type:"text",className:"w-full p-2 rounded-md text-black",placeholder:"Escribe el nombre del producto",onChange:o}),e.jsxs("div",{className:"flex h-full aspect-square mx-1",children:[e.jsx("div",{className:"hidden lg:flex h-full w-full justify-center items-center",children:e.jsx(h,{icon:S,className:"text-md"})}),e.jsx("button",{className:"flex lg:hidden h-full w-full justify-center items-center rounded-md transition-all duration-200 hover:bg-black/10",onClick:x,children:e.jsx(h,{icon:P,className:"text-md"})})]})]}),e.jsxs("div",{className:"relative z-10 flex flex-1  gap-5 lg:gap-10",children:[e.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4  gap-5 lg:gap-10 ",children:[l==null?void 0:l.map(i=>e.jsx(O,{...i},i.id)),l==null&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{})]}),(l==null?void 0:l.length)==0&&e.jsx("div",{className:"col-span-4 grid place-content-center rounded-md",children:e.jsx("h2",{className:"font-content uppercase text-3xl text-center select-text text-white",style:{textShadow:"1px 0 1px #000, -1px 0 1px #000, 0 1px 1px #000, 0 -1px 1px #000"},children:"No hay productos"})})]}),e.jsx(z,{isOpen:m,categorySelected:a,setCategorySelected:n,categories:t})]})]})}function O({...l}){const{addProduct:t}=c.useContext(B),a=n=>()=>t(n);return e.jsxs("div",{className:"flex flex-col items-center w-full bg-white rounded-md shadow-xl overflow-hidden mb-auto",children:[e.jsx("div",{className:"group/photo w-full aspect-video overflow-hidden rounded-sm shadow-lg",children:e.jsx("img",{src:l.photo_url,className:"flex w-full h-full object-cover object-center group-hover/photo:scale-110 transition-all duration-200"})}),e.jsxs("div",{className:"flex-1 flex flex-col w-full pb-3 px-2",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("h3",{className:"block text-nowrap text-ellipsis overflow-hidden font-link text-lg text-center mt-2",children:l.name}),e.jsx("p",{className:"font-content text-sm text-center opacity-80 overflow-auto text-pretty",children:l.description})]}),e.jsx("div",{className:"flex flex-row items-center w-full gap-5 justify-between",children:e.jsxs("h3",{className:"font-bold text-lg ml-2 my-1",children:["$",l.price]})}),e.jsxs("button",{className:"flex gap-1 justify-center items-center w-full py-2 px-3 mt-auto opacity-85 hover:opacity-100 rounded-md transition-all duration-300 bg-blue-500 text-white",onClick:a(l),children:[e.jsx("span",{children:"Agregar al Carrito"}),e.jsx(h,{icon:I,className:"text-base"})]})]})]})}function f(){return e.jsxs("div",{className:"flex flex-col items-center w-full bg-white rounded-md shadow-xl overflow-hidden mb-auto animate-pulse",children:[e.jsx("div",{className:" w-full p-2",children:e.jsx("div",{className:"w-full aspect-video rounded-sm bg-black/15"})}),e.jsxs("div",{className:"flex-1 flex flex-col w-full pb-3 px-2",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("div",{className:"block mt-2 h-6 w-2/3 bg-black/15 rounded-full mx-auto"}),e.jsx("div",{className:"block mt-2 h-5 w-full bg-black/15 rounded-full mx-auto"})]}),e.jsxs("div",{className:"flex flex-row items-center w-full gap-5 justify-between",children:[e.jsx("div",{className:"block my-1 h-4 w-full bg-black/15 rounded-full mx-auto"}),e.jsx("div",{className:"block my-1 h-4 w-full bg-black/15 rounded-full mx-auto"})]}),e.jsx("div",{className:"block w-full h-10 py-2 px-3 mt-2 rounded-md bg-black/20"})]})]})}function z({isOpen:l,categorySelected:t,setCategorySelected:a,categories:n=[]}){return e.jsx("div",{className:p("scroll-style absolute top-0 z-10 max-h-[calc(100vh-190px)] w-full overflow-y-auto bg-white rounded-md pr-1 shadow-xl","lg:sticky lg:top-20 lg:flex-1 lg:max-w-48",{"max-h-0 opacity-0 lg:max-h-[calc(100vh-190px)] lg:opacity-100":!l}),children:e.jsxs("div",{className:"flex flex-col w-full gap-1",children:[e.jsx("div",{className:"sticky top-0 z-10 flex justify-center items-center h-10 bg-white",children:e.jsx("h2",{className:"font-link font-bold text-center text-xl tracking-widest",children:"Categorias"})}),e.jsx(b,{name:"Todos",icon:"",id:"0",selected:t,onClick:()=>a(0)}),n==null?void 0:n.map(o=>e.jsx(b,{...o,selected:t,onClick:()=>a(o.id)},o.id)),!n&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{})]})]})})}function b({selected:l,onClick:t,...a}){return e.jsxs("button",{onClick:t,className:p("group/button relative flex items-center justify-between py-2 px-4 hover:bg-gray-300 font-link",{"bg-gray-300":l==a.id}),children:[e.jsx("div",{className:p("absolute left-0 top-1/5 -translate-y-1/5 w-[3px] h-0 group-hover/button:h-full bg-[--c6-bg] transition-all duration-300",{"h-full":l==a.id})}),e.jsx("span",{className:"block text-nowrap text-ellipsis overflow-hidden font-link text-left text-[--c4-bg]",children:a.name}),e.jsx("div",{dangerouslySetInnerHTML:{__html:a.icon},className:"w-4 min-w-4 fill-[--c4-bg] ml-1"})]})}function d(){return e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-black/20 animate-pulse",children:[e.jsx("span",{className:"block h-5 w-full rounded-full bg-black/10"}),e.jsx("div",{className:"h-5 aspect-square rounded-full ml-1 bg-black/10"})]})}export{M as default};
