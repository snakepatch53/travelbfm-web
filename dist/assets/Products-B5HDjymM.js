import{r as i,j as e,P as q,v as B,k as h,w as R,x as U,C as V}from"./index-tVVHshlL.js";import{u as L,C as z,a as G,b as H,c as d,d as W,e as A,f as l,g as J}from"./useCrudPanel-Dpg90wU7.js";import{g as K,s as Q,u as X,d as Y}from"./products-DgPn4QMM.js";import{a as Z}from"./categories-DgQ4Ofv4.js";import{C as $}from"./CrudBackground-C6Kc4l8w.js";import"./validations-R_Xd7w2Q.js";function se({businessId:t=null}){const C=(r,o)=>{var p,x,f,m;let a=!0;return(x=(p=r.photo)==null?void 0:p.files)!=null&&x.length&&((m=(f=r.photo)==null?void 0:f.files[0])==null?void 0:m.size)>2e6&&(o("La foto debe pesar maximo 2MB"),a=!1),a},{entityName:g,pluralEntityName:j,head:P,table:b,form:y,confirm:E,progress:F,datalist:s,$form:N,handleModeNew:T,handleModeEdit:k,handleModeDelete:D,hanleCancel:c,handleSubmit:S,handleDelete:v,searchValue:M,searchOnChange:O}=L({entityName:"Product",pluralEntityName:"Productos",excludeFieldsValidationEdit:["photo"],searchFields:["name","description","price"],extraValidations:C,isStorageMultipartFormData:!0,isUpdateMultipartFormData:!0,crudGet:K,crudStorage:Q,crudUpdate:X,crudDestroy:Y}),[_,u]=i.useState([]);i.useEffect(()=>{Z().then(r=>{if(!r)return;if(!t)return u(r);const o=r.filter(a=>(a==null?void 0:a.business_id)==t);u(o)})},[t]);const[w,n]=i.useState(null);return i.useEffect(()=>{if(!t||!s)return n(s);const r=s.filter(o=>{var a;return((a=o==null?void 0:o.category)==null?void 0:a.business_id)==t});n(r)},[t,s]),e.jsxs(q,{className:"flex flex-col gap-7 w-full",children:[!t&&e.jsx($,{src:"/image/food3.jpg"}),e.jsx(z,{title:j,icon:B,isOpen:P,onClickNew:T,searchValue:M,searchOnChange:O}),e.jsx(G,{titles:["Foto","Nombre","Descripcion","Precio"],dataList:w,isOpen:b,onRowPrint:r=>e.jsxs("tr",{children:[e.jsx(H,{src:r.photo_url,alt:"Foto "+r.name}),e.jsx(d,{value:r.name}),e.jsx(d,{value:r.description}),e.jsx(d,{value:r.price}),e.jsxs(W,{children:[e.jsx(h,{text:"Editar",icon:R,type:"edit",onClick:()=>k(r)}),e.jsx(h,{text:"Borrar",icon:U,type:"delete",onClick:()=>D(r)})]})]},r.id)}),e.jsxs(A,{title:g,isOpen:y,onClickCancel:c,onSubmit:S,formRef:N,children:[e.jsx(l,{label:"Nombre",placeholder:"Escriba el nombre del producto",name:"name",required:!0}),e.jsx(l,{label:"Descripcion",placeholder:"Escriba una descripcion",name:"description",required:!0}),e.jsx(l,{label:"Precio",placeholder:"Escriba su numero de celular",name:"price",required:!0}),e.jsx(l,{label:"Foto",name:"photo",type:"file"}),e.jsxs(l,{label:"Categoria",name:"category_id",type:"select",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione una categoria"}),_.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsx(J,{isOpen:E,text:"Â¿Seguro de eliminar este usuario?",onClickDelete:v,onClickCancel:c}),e.jsx(V,{isOpen:F,text:"Procesando tu solicitud..."})]})}export{se as default};
