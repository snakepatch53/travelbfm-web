import{r as l,o as O,j as e,P as U,C as L,y as w,k as i,z as R,w as V,x as _,m as z}from"./index-BTbKq4bm.js";import{u as A,C as G,a as H,b as J,c as x,d as K,e as Q,f as s,g as W}from"./useCrudPanel-B8VwBphK.js";import{g as X,s as Y,u as Z,d as $,C as ee,M as ae}from"./ModalProducts-B5XWk0uc.js";import"./validations-R_Xd7w2Q.js";function te(){const m=(a,n,{isUrl:M})=>{var d,u,c,p;let r=!0;return M(a.link.value)||(n("El link debe ser una URL valida"),r=!1),(u=(d=a.logo)==null?void 0:d.files)!=null&&u.length&&((p=(c=a.logo)==null?void 0:c.files[0])==null?void 0:p.size)>2e6&&(n("La foto debe pesar maximo 2MB"),r=!1),r},{entityName:b,pluralEntityName:j,head:g,table:h,form:C,confirm:f,progress:E,datalist:k,$form:v,handleModeNew:y,handleModeEdit:B,handleModeDelete:S,hanleCancel:t,handleSubmit:q,handleDelete:N,searchValue:D,searchOnChange:P}=A({entityName:"Negocio",pluralEntityName:"Negocios",excludeFieldsValidationEdit:["logo","url"],searchFields:["name"],extraValidations:m,isStorageMultipartFormData:!0,isUpdateMultipartFormData:!0,crudGet:X,crudStorage:Y,crudUpdate:Z,crudDestroy:$}),[T,F]=l.useState([]);l.useEffect(()=>{O().then(a=>F(a))},[]);const[I,o]=l.useState(null);return e.jsxs(U,{className:"flex flex-col gap-7 w-full",children:[e.jsx(L,{src:"/image/food6.jpg"}),e.jsx(G,{title:j,icon:w,isOpen:g,onClickNew:y,searchValue:D,searchOnChange:P}),e.jsx(H,{titles:["Logo","Nombre","Celular"],dataList:k,isOpen:h,onRowPrint:a=>e.jsxs("tr",{children:[e.jsx(J,{src:a.logo_url,alt:"Foto "+a.name}),e.jsx(x,{value:a.name}),e.jsx(x,{value:a.phone}),e.jsx(K,{children:e.jsxs(ee,{children:[e.jsx(i,{text:"Productos",icon:R,type:"cancel",onClick:()=>o(a.id)}),e.jsx(i,{text:"Editar",icon:V,type:"edit",onClick:()=>B(a)}),e.jsx(i,{text:"Borrar",icon:_,type:"delete",onClick:()=>S(a)})]})})]},a.id)}),e.jsxs(Q,{title:b,isOpen:C,onClickCancel:t,onSubmit:q,formRef:v,children:[e.jsx(s,{label:"Nombre",placeholder:"Escriba el nombre",name:"name",required:!0}),e.jsx(s,{label:"Descripcion",placeholder:"Escriba una descripcion",name:"description",required:!0}),e.jsx(s,{label:"Descripcion corta",placeholder:"Escriba una descripcion corta",name:"short_description",required:!0}),e.jsx(s,{label:"Celular",placeholder:"Escriba su numero de celular",name:"phone",required:!0}),e.jsx(s,{label:"Direccion",placeholder:"Escriba una direccion",name:"address",required:!0}),e.jsx(s,{label:"Ubicación",placeholder:"Escriba su ubicacion",name:"location",required:!0}),e.jsx(s,{label:"Link",placeholder:"Escriba el link",name:"link",required:!0}),e.jsx(s,{name:"state",label:"Estado",type:"radio",radioOptions:[{value:"Activo",label:"Activo",checked:!0},{value:"Inactivo",label:"Inactivo"}],required:!0}),e.jsx(s,{label:"Logo",name:"logo",type:"file",accept:"image/png,image/jpg,image/jpeg",required:!0}),e.jsxs(s,{label:"Usuario",name:"user_id",type:"select",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un usuario"}),T.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsx(W,{isOpen:f,text:"¿Seguro de eliminar este usuario?",onClickDelete:N,onClickCancel:t}),e.jsx(z,{isOpen:E,text:"Procesando tu solicitud..."}),e.jsx(ae,{businessId:I,setBusinessId:o})]})}export{te as default};
